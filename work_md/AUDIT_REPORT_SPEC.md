# Audit Report Specification
Project: jp-pt-school-terms
Scope: Issue #2 – Data Quality Automation / Issue #3 – Sources Ledger MVP
Generated by: scripts/audit_terms.py --check

---

# 1. Summary

- Terms total: <number>
- Categories total: <number>
- Duplicate JA: <count>
- Duplicate PT: <count>
- Type mismatch: <count>
- Missing search field: <count>
- Source ledger errors: <count>
- Source ledger warnings: <count>
- Unreferenced sources: <count>
- Auto-fix required: YES / NO

Overall Status:
- PASS (no blocking issues)
- WARN (non-breaking improvements)
- FAIL (blocking issues present)

---

# 2. Duplicate Detection

## 2.1 JA Duplicates

Format:
- <Normalized JA>:
  - <Term ID> | <Original JA> | <Category>

Example:
- 提出してください:
  - T0001 | 提出してください | C01
  - T0102 | 提出してください | C02

---

## 2.2 PT Duplicates

Format:
- <Normalized PT>:
  - <Term ID> | <Original PT> | <Category>

---

# 3. Type Reclassification

## 3.1 Type Mismatch

Format:
- <Term ID>
  - Current: <current_type>
  - Expected: <expected_type>
  - JA: <ja>
  - Reason: <rule applied>

---

# 4. Search Field Audit

## 4.1 Missing Search

- <Term ID> | <JA>

## 4.2 Empty Search Arrays

- <Term ID> | <JA>

---

# 5. Sources Ledger Audit

## 5.1 Ledger Errors (FAIL)

- <Source ID> | <Field> | <Detail>

## 5.2 Ledger Warnings (WARN)

- <Source ID> | <Field> | <Detail>

## 5.3 Term Reference Issues

- <Term ID> | <Detail>

## 5.4 Unreferenced Sources

- <Source ID>

---

# 6. Auto-Fix Preview

Only shown when `--fix` is NOT used.

Format:
- <Term ID>
  - Add search: YES/NO
  - Update type: YES/NO

---

# 7. Fix Execution Report (Only when --fix used)

- Terms updated: <count>
- Types updated: <count>
- Search fields generated: <count>
- Sources initialized: <count>
- Duplicates flagged (not auto-removed): <count>

JSON modified:
- YES / NO

---

# 8. Blocking Issues

List only critical issues that must be resolved before merge.

- <Issue description>

---

# 9. Recommended Action

One of:
- Safe to merge
- Merge after review
- Do not merge

---

# Output Rules

1. All sections must exist even if empty.
2. If empty, write "None".
3. Do not omit sections.
4. IDs must match terms.json exactly.
5. Deterministic ordering:
   - Sort by Term ID ascending.
   - Sort duplicates alphabetically by normalized value.

---

# End of Report
